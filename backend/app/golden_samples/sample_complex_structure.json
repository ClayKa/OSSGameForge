{
  "id": "scene_complex_structure_001",
  "scene_name": "Layered Scene Test",
  "description": "Tests complex JSON structures, nested objects, and recursive rendering",
  "style": "puzzle_platformer",
  "metadata": {
    "width": 1920,
    "height": 1080,
    "version": "1.0.0",
    "engine": "html5",
    "features": ["layers", "groups", "triggers", "conditions", "events"]
  },
  "global_settings": {
    "physics": {
      "gravity": {"x": 0, "y": 9.8},
      "air_resistance": 0.01,
      "time_scale": 1.0
    },
    "rendering": {
      "antialiasing": true,
      "shadows": true,
      "bloom": false,
      "vsync": true
    },
    "debug": {
      "show_collision_boxes": false,
      "show_layer_boundaries": false,
      "enable_console": true
    }
  },
  "layers": [
    {
      "id": "layer_background",
      "name": "Background Layer",
      "z_index": -10,
      "visible": true,
      "locked": false,
      "opacity": 1.0,
      "blend_mode": "normal",
      "entities": [
        {
          "id": "sky_gradient",
          "type": "gradient_fill",
          "bounds": {"x": 0, "y": 0, "width": 1920, "height": 1080},
          "properties": {
            "gradient_type": "linear",
            "angle": 90,
            "colors": [
              {"position": 0.0, "color": "#1a1a2e"},
              {"position": 0.5, "color": "#16213e"},
              {"position": 1.0, "color": "#0f3460"}
            ]
          }
        },
        {
          "id": "stars_particle_system",
          "type": "particle_system",
          "position": {"x": 960, "y": 200},
          "properties": {
            "particle_type": "stars",
            "emission_rate": 5,
            "lifetime": 10,
            "spread": {"x": 1920, "y": 400},
            "velocity": {"min": -10, "max": 10},
            "size": {"min": 1, "max": 3},
            "color": "#ffffff",
            "twinkle": true
          }
        }
      ]
    },
    {
      "id": "layer_gameplay",
      "name": "Gameplay Layer",
      "z_index": 0,
      "visible": true,
      "locked": false,
      "opacity": 1.0,
      "entities": [
        {
          "id": "platform_group_1",
          "type": "entity_group",
          "name": "Platform Cluster A",
          "position": {"x": 100, "y": 700},
          "children": [
            {
              "id": "platform_a1",
              "type": "platform",
              "relative_position": {"x": 0, "y": 0},
              "size": {"width": 150, "height": 30},
              "properties": {
                "material": "stone",
                "collision": true
              }
            },
            {
              "id": "platform_a2",
              "type": "platform",
              "relative_position": {"x": 200, "y": -50},
              "size": {"width": 150, "height": 30},
              "properties": {
                "material": "stone",
                "collision": true
              }
            },
            {
              "id": "platform_a3",
              "type": "platform",
              "relative_position": {"x": 400, "y": -100},
              "size": {"width": 150, "height": 30},
              "properties": {
                "material": "stone",
                "collision": true
              }
            }
          ],
          "group_properties": {
            "moveable": true,
            "rotation": 0,
            "scale": {"x": 1.0, "y": 1.0}
          }
        },
        {
          "id": "mechanism_door",
          "type": "interactive_mechanism",
          "name": "Puzzle Door",
          "position": {"x": 1500, "y": 600},
          "size": {"width": 100, "height": 200},
          "properties": {
            "state": "closed",
            "requires_trigger": true,
            "trigger_ids": ["switch_1", "switch_2"],
            "trigger_condition": "all",
            "animations": {
              "opening": {
                "duration": 2,
                "easing": "ease-in-out",
                "keyframes": [
                  {"time": 0, "position": {"y": 600}},
                  {"time": 1, "position": {"y": 400}},
                  {"time": 2, "position": {"y": 300}}
                ]
              }
            }
          }
        },
        {
          "id": "switch_1",
          "type": "trigger_switch",
          "position": {"x": 300, "y": 650},
          "size": {"width": 40, "height": 40},
          "properties": {
            "activated": false,
            "activation_type": "pressure",
            "required_weight": 1,
            "visual_states": {
              "inactive": {"color": "#ff0000"},
              "active": {"color": "#00ff00"}
            }
          }
        },
        {
          "id": "switch_2",
          "type": "trigger_switch",
          "position": {"x": 800, "y": 550},
          "size": {"width": 40, "height": 40},
          "properties": {
            "activated": false,
            "activation_type": "interaction",
            "interaction_key": "E",
            "visual_states": {
              "inactive": {"color": "#ff0000"},
              "active": {"color": "#00ff00"}
            }
          }
        },
        {
          "id": "player_spawn",
          "type": "player",
          "position": {"x": 100, "y": 650},
          "size": {"width": 32, "height": 48},
          "properties": {
            "health": 100,
            "inventory": {
              "slots": 5,
              "items": []
            },
            "abilities": {
              "double_jump": false,
              "wall_climb": false,
              "dash": true
            },
            "stats": {
              "speed": 200,
              "jump_power": 350,
              "dash_distance": 150,
              "dash_cooldown": 2
            }
          }
        }
      ]
    },
    {
      "id": "layer_effects",
      "name": "Effects Layer",
      "z_index": 5,
      "visible": true,
      "locked": false,
      "opacity": 0.8,
      "blend_mode": "additive",
      "entities": [
        {
          "id": "light_source_1",
          "type": "dynamic_light",
          "position": {"x": 400, "y": 400},
          "properties": {
            "intensity": 0.8,
            "radius": 200,
            "color": "#ffcc00",
            "flicker": {
              "enabled": true,
              "frequency": 0.1,
              "intensity_variation": 0.1
            }
          }
        },
        {
          "id": "fog_effect",
          "type": "environmental_effect",
          "bounds": {"x": 0, "y": 800, "width": 1920, "height": 280},
          "properties": {
            "effect_type": "fog",
            "density": 0.3,
            "color": "#cccccc",
            "movement": {
              "enabled": true,
              "speed": {"x": 10, "y": 0}
            }
          }
        }
      ]
    },
    {
      "id": "layer_foreground",
      "name": "Foreground Layer",
      "z_index": 10,
      "visible": true,
      "locked": false,
      "opacity": 0.9,
      "entities": [
        {
          "id": "ui_overlay",
          "type": "ui_container",
          "position": {"x": 0, "y": 0},
          "size": {"width": 1920, "height": 1080},
          "children": [
            {
              "id": "health_bar",
              "type": "ui_element",
              "relative_position": {"x": 20, "y": 20},
              "size": {"width": 200, "height": 30},
              "properties": {
                "element_type": "progress_bar",
                "value_binding": "player.health",
                "max_value": 100,
                "colors": {
                  "background": "#333333",
                  "fill": "#ff0000",
                  "border": "#ffffff"
                }
              }
            },
            {
              "id": "score_display",
              "type": "ui_element",
              "relative_position": {"x": 1700, "y": 20},
              "size": {"width": 200, "height": 40},
              "properties": {
                "element_type": "text",
                "text": "Score: 0",
                "font": {
                  "family": "Arial",
                  "size": 24,
                  "weight": "bold",
                  "color": "#ffffff"
                },
                "alignment": "right"
              }
            }
          ]
        }
      ]
    }
  ],
  "events": [
    {
      "id": "event_level_start",
      "trigger": "scene_load",
      "actions": [
        {"type": "play_sound", "sound": "level_start_fanfare"},
        {"type": "show_message", "text": "Activate both switches to open the door!", "duration": 3},
        {"type": "start_timer", "id": "level_timer"}
      ]
    },
    {
      "id": "event_door_open",
      "trigger": {
        "type": "condition",
        "condition": "switch_1.activated AND switch_2.activated"
      },
      "actions": [
        {"type": "animate", "target": "mechanism_door", "animation": "opening"},
        {"type": "play_sound", "sound": "door_opening"},
        {"type": "add_score", "value": 100}
      ]
    },
    {
      "id": "event_player_death",
      "trigger": {
        "type": "condition",
        "condition": "player.health <= 0"
      },
      "actions": [
        {"type": "show_message", "text": "Game Over!", "duration": 2},
        {"type": "reload_scene", "delay": 2}
      ]
    }
  ],
  "scripts": [
    {
      "id": "script_enemy_ai",
      "type": "behavior_script",
      "targets": ["enemy_*"],
      "code": "function update(entity, deltaTime) {\n  // Simple patrol AI\n  if (!entity.direction) entity.direction = 1;\n  entity.x += entity.speed * entity.direction * deltaTime;\n  if (entity.x > entity.patrol_max || entity.x < entity.patrol_min) {\n    entity.direction *= -1;\n  }\n}"
    }
  ],
  "validation_rules": {
    "minimum_entities": 5,
    "required_entity_types": ["player", "platform", "goal"],
    "layer_count": {"min": 2, "max": 10},
    "complexity_score": 85
  }
}